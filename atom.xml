<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[ç‹‚å¥”çš„èœ—ç‰›]]></title>
  <link href="http://bgallon.github.io/atom.xml" rel="self"/>
  <link href="http://bgallon.github.io/"/>
  <updated>2016-09-03T12:05:00+08:00</updated>
  <id>http://bgallon.github.io/</id>
  <author>
    <name><![CDATA[fishpan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[IPCæœºåˆ¶-Binder]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/14/ipcji-zhi-binder/"/>
    <updated>2016-08-14T10:43:45+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/14/ipcji-zhi-binder</id>
    <content type="html"><![CDATA[<p>Binderæ˜¯è¿›ç¨‹é—´é€šè®¯çš„ä¸€ç§æ–¹å¼ï¼ŒAndroidå¼€å‘ä¸­ï¼ŒBinderä¸»è¦ç”¨äºServiceä¸­ï¼Œå…¶ä¸­æ™®é€šçš„serviceä¸æ¶‰åŠè®¾è®¡è¿›ç¨‹é—´é€šè®¯ï¼Œæˆ‘è¿™é‡Œçœ‹ä¸‹AIDLæ–¹å¼ï¼Œçœ‹ä¸‹æ•´ä¸ªçš„è°ƒç”¨è¿‡ç¨‹</p>

<!--more-->


<p>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºaidlæ–‡ä»¶IDemoManager.aidl,<strong><em>æ³¨æ„</em></strong>åœ¨Android studioä¸­ä½¿ç”¨aidl,éœ€è¦å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåç§°ä¸ºaidl,å’ŒjavaåŒç›®å½•ï¼Œå¦‚å›¾</p>

<p><img src="http://i1.piimg.com/567571/e946c4c0e24e3645.jpg" alt="" /></p>

<p>å†…å®¹å¦‚ä¸‹ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">xxx</span><span class="o">.</span><span class="na">xxx</span><span class="o">;</span>
</span><span class='line'>  
</span><span class='line'><span class="kd">interface</span> <span class="nc">IDemoManager</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åè¿›è¡Œç¼–è¯‘ï¼Œå¦‚ä¸‹å›¾</p>

<p><img src="http://i1.piimg.com/567571/38daf5235fd2f2e9.jpg" alt="" /></p>

<p>å¯ä»¥åœ¨buildä¸­å‘ç°è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œè¿™å°±æ˜¯aidlè¦åšçš„äº‹æƒ…ï¼Œå·¥å…·æ ¹æ®æˆ‘ä»¬å†™çš„aidlæ–‡ä»¶ï¼Œç¼–ç¨‹æˆä»£ç ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸å†™aidlæ–‡ä»¶ï¼Œè‡ªå·±å†™ä»£ç </p>

<p><img src="http://i1.piimg.com/567571/2896af883b845c00.jpg" alt="" /></p>

<p>ä¸‹é¢æˆ‘å°±æ¥ç ”ç©¶ä¸€ä¸‹ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„ä»£ç ï¼Œè¿™ä¸ªæ‰æ˜¯æœ€å…³é”®</p>

<hr />

<pre><code>public interface IDemoManager extends android.os.IInterface {
/**
 * Local-side IPC implementation stub class.
 */
public static abstract class Stub extends android.os.Binder implements com.fishpan.appliactions.IDemoManager {
    private static final java.lang.String DESCRIPTOR = "com.fishpan.appliactions.IDemoManager";

    /**
     * Construct the stub at attach it to the interface.
     */
    public Stub() {
        this.attachInterface(this, DESCRIPTOR);
    }

    /**
     * Cast an IBinder object into an com.fishpan.appliactions.IDemoManager interface,
     * generating a proxy if needed.
     */
    public static com.fishpan.appliactions.IDemoManager asInterface(android.os.IBinder obj) {
        if ((obj == null)) {
            return null;
        }
        android.os.IInterface iin = obj.queryLocalInterface(DESCRIPTOR);
        if (((iin != null) &amp;&amp; (iin instanceof com.fishpan.appliactions.IDemoManager))) {
            return ((com.fishpan.appliactions.IDemoManager) iin);
        }
        return new com.fishpan.appliactions.IDemoManager.Stub.Proxy(obj);
    }

    @Override
    public android.os.IBinder asBinder() {
        return this;
    }

    @Override
    public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException {
        switch (code) {
            case INTERFACE_TRANSACTION: {
                reply.writeString(DESCRIPTOR);
                return true;
            }
            case TRANSACTION_add: {
                data.enforceInterface(DESCRIPTOR);
                int _arg0;
                _arg0 = data.readInt();
                int _arg1;
                _arg1 = data.readInt();
                int _result = this.add(_arg0, _arg1);
                reply.writeNoException();
                reply.writeInt(_result);
                return true;
            }
        }
        return super.onTransact(code, data, reply, flags);
    }

    private static class Proxy implements com.fishpan.appliactions.IDemoManager {
        private android.os.IBinder mRemote;

        Proxy(android.os.IBinder remote) {
            mRemote = remote;
        }

        @Override
        public android.os.IBinder asBinder() {
            return mRemote;
        }

        public java.lang.String getInterfaceDescriptor() {
            return DESCRIPTOR;
        }

        @Override
        public int add(int a, int b) throws android.os.RemoteException {
            android.os.Parcel _data = android.os.Parcel.obtain();
            android.os.Parcel _reply = android.os.Parcel.obtain();
            int _result;
            try {
                _data.writeInterfaceToken(DESCRIPTOR);
                _data.writeInt(a);
                _data.writeInt(b);
                mRemote.transact(Stub.TRANSACTION_add, _data, _reply, 0);
                _reply.readException();
                _result = _reply.readInt();
            } finally {
                _reply.recycle();
                _data.recycle();
            }
            return _result;
        }
    }

    static final int TRANSACTION_add = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
}

public int add(int a, int b) throws android.os.RemoteException;
</code></pre>

<hr />

<p>è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æœ‰ç‚¹ä¹±ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç»™æ ¼å¼åŒ–ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¯‘å·¥å…·ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªæ¥å£IDemoManager,ç»§æ‰¿äºIInterfaceï¼Œå•¥äº‹ä¹Ÿæ²¡å¹²ï¼›ä¸€ä¸ªaddæ–¹æ³•ï¼Œä¸€ä¸ªé™æ€çš„å†…éƒ¨æŠ½è±¡ç±»ï¼Œç»§æ‰¿ä¸Binderï¼Œå®ç°IDemoManageræœ¬èº«ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹ä»–çš„æ¯ä¸€éƒ¨åˆ†</p>

<ul>
<li>DESCRIPTOR Binderçš„å”¯ä¸€æ ‡è¯†</li>
<li>asInterface ç”¨äºå°†æœåŠ¡ç«¯çš„Binderå¯¹è±¡è½¬æ¢æˆå®¢æˆ·ç«¯æ‰€éœ€è¦çš„aidlæ¥å£ç±»å‹çš„å¯¹è±¡ï¼Œæ³¨æ„æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»£ç çœ‹å‡ºï¼Œä»–æœ‰ä¸¤ä¸ªåœ°æ–¹æœ‰returnï¼Œç¬¬ä¸€ä¸ªå…¶å®æ˜¯å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å±äºåŒä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œè¿”å›è‡ªå·±æœ¬èº«ï¼Œç¬¬äºŒä¸ªæ˜¯è¿”å›äº†ä¸€ä¸ªä»£ç†å¯¹è±¡</li>
<li>asBinder ç”¨äºè¿”å›å½“å‰Binderå¯¹è±¡</li>
<li>onTransact è¿™ä¸ªæ–¹æ³•è¿è¡Œåœ¨<strong><em>æœåŠ¡ç«¯</em></strong>ï¼Œå½“å®¢æˆ·ç«¯å‘èµ·è·¨è¿›ç¨‹è¯·æ±‚æ—¶ï¼Œè¿œç¨‹è¯·æ±‚ä¼šé€šè¿‡ç³»ç»Ÿåº•å±‚å°è£…åäº¤æœ‰æ­¤æ–¹æ³•ã€‚æœåŠ¡ç«¯é€šè¿‡codeï¼Œç¡®å®šå®¢æˆ·ç«¯è¦æ‰§è¡Œä»€ä¹ˆæ–¹æ³•ï¼Œä»dataè·å–å‚æ•°ï¼Œç„¶åæŒ‡å®šç›®æ ‡æ–¹æ³•ï¼›æ‰§è¡Œå®Œæ¯•åå°±åƒreplyä¸­å†™å…¥è¿”å›å€¼(å¦‚æœæœ‰è¿”å›å€¼)</li>
<li>Proxy#add æ­¤æ–¹æ³•è¿è¡Œåœ¨å®¢æˆ·ç«¯ï¼Œå½“å®¢æˆ·ç«¯è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œä¼šè¾“å…¥å‹å‚æ•°writeè¿›<em>dataï¼Œè¾“å‡ºå‹å‚æ•°writeè¿›</em>reply,ç´§æ¥ç€ä¼šè°ƒç”¨transactæ–¹æ³•æ¥å‘èµ·RPCè¯·æ±‚ï¼Œå½“å‰çº¿ç¨‹æŒ‚èµ·ï¼›æœåŠ¡ç«¯çš„onTransactæ–¹æ³•è¢«è°ƒç”¨ï¼Œè°ƒç”¨ç»“æŸåï¼Œè¿”å›æ•°æ®ä¼šåœ¨_replyä¸­ã€‚</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[FramtentPagerAdapterå’ŒFramgentStatePagerAdapterçš„åŒºåˆ«]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/14/framtentpageradapterhe-framgentstatepageradapterde-qu-bie/"/>
    <updated>2016-08-14T10:43:45+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/14/framtentpageradapterhe-framgentstatepageradapterde-qu-bie</id>
    <content type="html"><![CDATA[<p>å¹³æ—¶è¿˜çœŸçš„å¾ˆå°‘å…³å¿ƒFramgmentStatsPagerAdpaterå’ŒFragmentPagerAdapterï¼Œä»¥å‰åªæ˜¯ä¸¤è€…æœ‰åŒºåˆ«ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆæ¸…æ¥šåˆ°åº•æœ‰å•¥åŒºåˆ«ï¼Œä»Šå¤©å°±ç‰¹åˆ«å†™äº†ä¸€ä¸ªdemoï¼Œæ¥ç ”ç©¶äº†ä¸‹ä¸¤è€…çš„åŒºåˆ«</p>

<!--more-->


<h4>FragmentStateViewPager</h4>

<p>å¾ˆå¤šèµ„æ–™éƒ½åœ¨è¯´ï¼šè¿™ä¸ªé€‚é…å™¨æ˜¯å®ç°å¤šä¸ªfragmentç•Œé¢çš„æ»‘åŠ¨æ—¶éå¸¸æœ‰æ•ˆï¼Œå½“Fragmentå¯¹ç”¨æˆ·ä¸å¯è§æ—¶ï¼Œæ•´ä¸ªfragmentä¼šè¢«é”€æ¯ï¼Œåªä¼šä¿å­˜fragmentçš„çŠ¶æ€ï¼Œæ›´é€‚åˆå½“fragmentæ¯”è¾ƒå¤šçš„æ—¶å€™ä½¿ç”¨ï¼Œè€Œä¸”æ¶ˆè€—çš„èµ„æºæ›´å°‘:æˆ‘å†™äº†æ®µä»£ç åœ¨Fragmentçš„onCreateï¼ŒonCreateViewï¼ŒonDestory,onDestoryViewæ–¹æ³•ä¸­æ‰“å°æ—¥å¿—ï¼Œè§‚å¯Ÿå®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼š
æˆ‘è¿›å…¥activityä¸€ç›´æ»‘åŠ¨åˆ°ç¬¬ä¸‰ä¸ªFragmentä¸ºæ­¢ï¼Œæ—¥å¿—å¦‚ä¸‹</p>

<p><img src="http://i2.buimg.com/567571/235e5452e84d1730.jpg" alt="" /></p>

<p>é€šè¿‡æ—¥å¿—æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š</p>

<ul>
<li>å½“è¿›å…¥Activityæ—¶ï¼Œä¼šåˆ›å»ºä¸¤ä¸ªFragment</li>
<li>å‘å³æ»‘ä¸€ä¸‹åˆ°1ï¼Œåˆ›å»ºç¬¬ä¸‰ä¸ªfragment</li>
<li>å†å‘å³æ»‘ä¸€ä¸‹åˆ°2ï¼Œè¿™ä¸ªæ—¶å€™ä¸ä»…ä»…éƒ½åˆ›å»ºäº†ä¸€ä¸ªfragmentï¼Œè€Œä¸”è¿˜é”€æ¯äº†ç¬¬ä¸€ä¸ªfragment</li>
<li>å†å‘å³æ»‘ä¸€ä¸‹åˆ°3ï¼Œè¿™ä¸ªæ—¶å€™åŒæ ·ï¼Œåˆ›å»ºä¸€ä¸ªé”€æ¯ä¸€ä¸ª</li>
</ul>


<p>å¯è§ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è®¾ç½®viewPagerçš„offscreenPageLimitå±æ€§æ—¶ï¼Œå½“å‰fragmentçš„ä¿ç•™æ€»æ•°æœ€å¤šæ˜¯ä¸‰ä¸ªï¼ŒåŠå½“å‰é€‰ä¸­çš„fragmentå’Œé€‰ä¸­å·¦å³ä¸¤ä¸ªfragmentï¼ˆå¯èƒ½æ²¡æœ‰ï¼‰ï¼Œå…¶å®ƒçš„fragmentå°±ä¼šè¢«é”€æ¯ï¼Œå¹¶ä¸”è¿˜ä¼šä¿ç•™é”€æ¯çš„fragmentçš„çŠ¶æ€ï¼Œå¾…é‡å»ºæ—¶è¿›è¡Œæ¢å¤ï¼ˆonSaveInstanceStateæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—ä¸Šè¾¹è¯´çš„å½“fragmentä¸å¯è§æ—¶å°±ä¼šè¢«é”€æ¯æ—¶é”™è¯¯çš„ï¼Œä¸¥æ ¼çš„æ¥è®²åº”è¯¥æ˜¯åœ¨ç¼“å­˜fragmentä¹‹å¤–çš„fragmentä¼šè¢«é”€æ¯ï¼Œ<strong><em>å¹¶ä¸æ˜¯ä¸å¯è§å°±ä¼šè¢«é”€æ¯</em></strong></p>

<h4>FragmentViewPager</h4>

<p>è¿™ä¸ªæ˜¯ViewPager+Fragmentå¸¸ç”¨çš„é€‚é…å™¨ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ï¼Œè™½ç„¶å¸¸è§æˆ‘ä¸ºäº†å¼„æ¸…æ¥šæœ‰å•¥åŒºåˆ«ï¼ŒåŒæ ·åšäº†ä¸€ä¸ªå®éªŒï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸæ‰“å°æ—¥å¿—ï¼Œæ“ä½œæ­¥éª¤å’Œä¸Šè¾¹çš„FragmentStateViewPagerä¸€è‡´ï¼Œæ—¥å¿—å¦‚ä¸‹:</p>

<p><img src="http://i1.buimg.com/567571/3828d9ebb9dc03f8.jpg" alt="" /></p>

<p>ä»æ—¥å¿—ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒåŸºæœ¬ä¸Šå’ŒFragmentStateViewPagerç±»ä¼¼ï¼Œä½†æ˜¯å…¶ä¸­ç¼ºå°‘fragmenté”€æ¯çš„æ“ä½œï¼Œè¿™å°±æ˜¯ä»–ä»¬çš„åŒºåˆ«ï¼ŒfragmentStatePagerAdapterä¼šæŠŠç¼“å­˜ä¹‹å¤–çš„fragmenté”€æ¯ï¼Œè€ŒFragmentViewPageråˆ™ä¸ä¼šï¼Œè¿˜ä¼šè¿›è¡Œä¿ç•™ã€‚</p>

<h4>æ€»ç»“</h4>

<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒFragmentViewPagerä¼šæ›´åŠ æµç•…ï¼Œè€ŒFragmentStateViewPagerä¼šæ›´èŠ‚çœèµ„æºï¼Œå¯¹äºfragmentæ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨FragmentStateViewPagerï¼Œè¾ƒå°‘æ—¶ä½¿ç”¨FragmentViewPageræ›´ä¸ºå¦¥å½“ä¸€äº›ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[IPCæœºåˆ¶-å¤šè¿›ç¨‹]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/13/ipcji-zhi-duo-jin-cheng/"/>
    <updated>2016-08-13T15:03:24+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/13/ipcji-zhi-duo-jin-cheng</id>
    <content type="html"><![CDATA[<p>ä¸€ä¸ªåº”ç”¨é»˜è®¤åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹çš„åå­—å°±æ˜¯åº”ç”¨çš„åŒ…åï¼Œè¿›ç¨‹æ˜¯ç³»ç»Ÿåˆ†é…èµ„æºå’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½è¦æœ‰è‡ªå·±çš„èµ„æºå’Œç©ºé—´ï¼Œå…¶å®ƒç¨‹åºä¸èƒ½ä»»æ„è®¿é—®å½“å‰è¿›ç¨‹çš„ç©ºé—´ï¼Œç³»ç»Ÿç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…çš„ç©ºé—´ä¼šæœ‰é™åˆ¶ã€‚</p>

<!--more-->


<p>ä½†æ˜¯è¿™éƒ½æ˜¯é»˜è®¤æƒ…å†µä¸‹çš„äº‹æƒ…ï¼Œä¼Ÿå¤§çš„ç¨‹åºå‘˜æ˜¯ä¸ä¼šå±ˆæœä¸€ä¸ªè¿›ç¨‹çš„ï¼Œæˆ‘å°±å¼„å‡ºå¤šä¸ªè¿›ç¨‹æ¥ç©ç©ï¼›Androidç³»ç»Ÿä¹Ÿæ˜¯è›®å¤§æ–¹çš„ï¼Œä½ è¦å¤šä¸ªï¼Œå¥½ï¼Œæˆ‘æ¥æ»¡è¶³ä½ ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€äº›ç»„ä»¶è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­ï¼Œåªéœ€æŒ‡å®šç»„ä»¶çš„ï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>  android:process
</span></code></pre></td></tr></table></div></figure>


<p>è®¾ç½®processå±æ€§çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>

<ul>
<li>android:process=&ldquo;:remote&rdquo;,ä»¥å†’å·å¼€å¤´ï¼Œå†’å·åè¾¹çš„å­—ç¬¦æ˜¯å¯ä»¥éšæ„æŒ‡å®šçš„ã€‚å½“ç„¶è¿™åªæ˜¯ä¸€ç§ç¼©å†™å½¢å¼ï¼Œå…¨ç§°åº”è¯¥æ˜¯ï¼šåŒ…å+&ldquo;:remote"ï¼›è¿™ç§å½¢å¼è¡¨ç¤ºè¯¥è¿›ç¨‹ä¸ºå½“å‰åº”ç”¨çš„ç§æœ‰è¿›ç¨‹ï¼Œå…¶å®ƒåº”ç”¨çš„ç»„ä»¶ä¸å¯ä»¥å’Œå®ƒè·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚</li>
<li>android:process=&ldquo;xxx.xxx"è¡¨ç¤ºè¿è¡Œåœ¨ä»¥è¿™ä¸ªåç§°çš„å…¨å±€è¿›ç¨‹ä¸­ï¼Œå…¶å®ƒåº”ç”¨å¯ä»¥é€šè¿‡shareUIDå’Œä»–è·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼›</li>
</ul>


<p>è™½ç„¶å¼€å¯å¤šè¿›ç¨‹æ˜¯éå¸¸éå¸¸ç®€å•ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šå‘ï¼Œä¸€ä¸å°å¿ƒå°±æ‰è¿›å»äº†ï¼š</p>

<ul>
<li>Applicationå¤šæ¬¡åˆ›å»ºï¼Œå¯åŠ¨å¤šè¿›ç¨‹çš„ç”Ÿæ´»ï¼ŒApplicationä¼šè¢«å¤šæ¬¡åˆ›å»ºï¼Œåœ¨applicationä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å½“å‰è¿›ç¨‹åå­—ï¼Œæ¥åˆå§‹åŒ–æ•°æ®ï¼Œé˜²æ­¢æ— å¿…è¦çš„åˆå§‹åŒ–</li>
<li>é™æ€æˆå‘˜å¤±æ•ˆï¼Œå„ä¸ªè¿›ç¨‹æ˜¯å•ç‹¬åˆ†é…çš„å†…å­˜ï¼Œæ‰€ä»¥è¿™é‡Œçš„é™æ€æˆå‘˜å˜é‡å°†ä¼šå¤±æ•ˆ</li>
<li>æ–‡ä»¶å…±äº«ï¼Œå¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯èƒ½é€ æˆæ–‡ä»¶æŸåä¸¢å¤±ç­‰æƒ…å†µ</li>
<li>æ–­ç‚¹è°ƒè¯•çš„é—®é¢˜ã€‚è°ƒè¯•å°±æ˜¯è·Ÿè¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„å †æ ˆä¿¡æ¯ï¼Œç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´å’Œå„è‡ªçš„å †æ ˆï¼Œæ— æ³•å®ç°åœ¨ä¸åŒçš„è¿›ç¨‹é—´è°ƒè¯•</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[IPCæœºåˆ¶-åºåˆ—åŒ–]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/08/ipcji-zhi-xu-lie-hua/"/>
    <updated>2016-08-08T21:59:42+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/08/ipcji-zhi-xu-lie-hua</id>
    <content type="html"><![CDATA[<p>IPCï¼ˆInter-Process Cmmunicationï¼‰è¿›ç¨‹é—´é€šè®¯ï¼Œä¸¤ä¸ªè¿›ç¨‹é—´å¦‚ä½•äº¤æ¢æ•°æ®ã€‚è¿›ç¨‹å’Œçº¿ç¨‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿›ç¨‹åŒ…å«çº¿ç¨‹ã€‚ä¸‹é¢æˆ‘å°±å¼€å§‹ä¸€æ­¥ä¸€æ­¥çš„ç†Ÿæ‚‰å¦‚ä½•è¿›è¡Œè¿›ç¨‹é—´é€šè®¯ã€‚</p>

<!--more-->


<h4>åºåˆ—åŒ–</h4>

<p>æˆ‘ä»¬ä»¥å¾€çš„å¼€æ”¾çš„ç»éªŒä¸­æˆ–å¤šæˆ–å°‘çš„éƒ½æ¥è§¦è¿‡åºåˆ—ï¼ŒSerializableã€Parcelableä¸¤ä¸ªæ¥å£æˆ‘ä»¬æ€»ä¼šä¸æˆ‘ä»¬ä¸æœŸè€Œé‡ï¼Œæˆ‘ä»¬æœ€å¸¸è§çš„æ˜¯å½“æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªActivityæ—¶ï¼Œéœ€è¦ä¼ é€’ä¸€äº›å¤æ‚ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦é€šè¿‡åºåˆ—åŒ–çš„æ–¹å¼è¿›è¡Œä¼ é€’ã€‚</p>

<h4>Serializableæ¥å£</h4>

<p>Serializablesæ˜¯Javaæä¾›çš„æ¥å£ï¼Œå…¶å®å®ƒåªæ˜¯ä¸€ä¸ªç©ºæ¥å£ä»€ä¹ˆéƒ½æ²¡æœ‰åšï¼Œä½¿ç”¨å®ƒå®ç°åºåˆ—åŒ–ä¹Ÿæ˜¯ç°å¸¸ç®€å•ï¼Œåªéœ€å®ç°å®ƒå°±è¡Œã€‚ä½†æ˜¯æˆ‘ä»¬å¦å¤–è¦åšä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ–°åŠ ä¸€ä¸ªæ ‡è¯†å¦‚ä¸‹ï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
</span><span class='line'>      <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4640203801029274924L</span><span class="o">;</span>
</span><span class='line'>      <span class="kd">public</span> <span class="n">string</span> <span class="n">username</span><span class="o">;</span>
</span><span class='line'>      <span class="kd">public</span> <span class="n">string</span> <span class="n">userid</span><span class="o">;</span>
</span><span class='line'>      
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ˜¯çš„ï¼Œè®°ä½ä¸€å®šè¦å†™ä¸ŠserialVersionUIDè¿™ä¸ªå­—æ®µï¼Œå½“ç„¶å€¼ä¸ä¸€å®šæ˜¯è¿™ä¸ªï¼Œå¦è€…ä¼šæœ‰æƒŠå–œå“¦ï¼ï¼</p>

<p>å¦‚æœä½ ä¸æŒ‡å®šserialVersionUIDè¿™ä¸ªå€¼ï¼Œä¹Ÿç…§æ ·èƒ½å¤Ÿå®Œæˆåºåˆ—åŒ–ï¼Œä½†æ˜¯æŸäº›æƒ…å†µä¸‹å¯èƒ½æŠ¥å¼‚å¸¸ï¼æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥æ¯é¥¬æ¯é¥¬è¿™ä¸ªå­—æ®µæ˜¯å¹²å˜›ç”¨çš„ï¼›è¿™ä¸ªå­—æ®µæ˜¯ç”¨æ¥è¾…åŠ©åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ï¼Œåºåˆ—åŒ–çš„æ•°æ®åªæœ‰serialVersionUIDä¸å½“å‰è¦ååºåˆ—åŒ–çš„ç±»ä¸­çš„serialVersionUIDä¿æŒä¸€è‡´ï¼Œæ‰èƒ½æ­£å¸¸çš„ååºåˆ—åŒ–ï¼›å½“è¿›è¡Œåºåˆ—åŒ–çš„æ—¶å€™ä¼šä¿å­˜serialVersionUIDçš„å€¼ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™å†å»å¯¹æ¯”æ˜¯å¦ç›¸ç­‰ï¼›åœ¨ä¸æŒ‡å®šå€¼å¾—æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šè®¡ç®—å½“å‰ç±»çš„hashå€¼ç»™serialVersionUIDï¼Œä¸€æ—¦ç±»å‘ç”Ÿå˜åŒ–è¿™ä¸ªå€¼å°±ä¼šå˜åŒ–ï¼Œä»è€Œå‡ºç°å´©æºƒï¼Œå½“ç„¶å¦‚æœä½ ä¿®æ”¹äº†ç±»çš„åå­—æˆ–è€…å­—æ®µçš„ç±»å‹ï¼Œé‚£ä¹ˆä¹ŸåŒæ ·ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>

<h4>Pacelableæ¥å£</h4>

<p>Pacelableæ˜¯Androidç‰¹æœ‰çš„ä¸€ä¸ªæ¥å£ï¼Œç›¸å¯¹äºSerializable,å®ƒå®ç°èµ·æ¥ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚å®ä¾‹å¦‚ä¸‹</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="n">Parcelable</span> <span class="o">{</span>
</span><span class='line'>      <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
</span><span class='line'>      <span class="kd">private</span> <span class="n">String</span> <span class="n">userid</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">protected</span> <span class="nf">User</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">username</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
</span><span class='line'>          <span class="n">userid</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Creator</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">CREATOR</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Creator</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;()</span> <span class="o">{</span>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="n">User</span> <span class="nf">createFromParcel</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="n">User</span><span class="o">[]</span> <span class="nf">newArray</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">new</span> <span class="n">User</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>      <span class="o">};</span>
</span><span class='line'>
</span><span class='line'>      <span class="nd">@Override</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">describeContents</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="nd">@Override</span>
</span><span class='line'>      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeToParcel</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">dest</span><span class="o">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">dest</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
</span><span class='line'>          <span class="n">dest</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">userid</span><span class="o">);</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong><em>æ³¨æ„</em></strong>è¿™é‡Œä¸€å®šæ³¨æ„writeToParcel(Parcel dest, int flags)å’ŒUser(Parcel in)ä¸­è¯»å–æˆ–å‚¨å­˜å±æ€§çš„é¡ºåºå‘¢ï¼ˆçŒ›æ•²é»‘æ¿çŠ¶ï¼‰ï¼Œå…ˆå­˜å…ˆè¯»ï¼›</p>

<h4>æ€»ç»“</h4>

<p>æ³¨æ„ï¼Œæ³¨æ„ï¼Œæ³¨æ„é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œè¿™æ˜¯å¿…è€ƒç‚¹ï¼Œè®°å¥½ç¬”è®°å•¦ï¼›Parcelableçš„æ€§èƒ½æ¯”Serializableè¦å¥½ï¼Œå†…å­˜å¼€é”€æ–¹é¢æ¯”è¾ƒå°ï¼Œæ‰€ä»¥å†…å­˜åœ¨ä¼ é€’æ•°æ®æ—¶æ¨èParcelable,æ¯”å¦‚activityé—´ä¼ é€’æ•°æ®æ—¶ï¼›ä½†æ˜¯Serializbleåºåˆ—åŒ–æ–¹ä¾¿ï¼Œå¯ç”¨åœ¨ä¿å­˜æˆ–è€…ç½‘ç»œä¼ è¾“çš„æ—¶å€™ï¼Œå¦å¤–Androidä¸åŒç‰ˆæœ¬Parcelableå¯èƒ½ä¼šä¸åŒï¼Œæ‰€ä»¥ä¸å»ºè®®ç”¨å®ƒè¿›è¡ŒæŒä¹…åŒ–ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Activityå¯åŠ¨æ¨¡å¼]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/05/activityqi-dong-mo-shi/"/>
    <updated>2016-08-05T23:01:49+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/05/activityqi-dong-mo-shi</id>
    <content type="html"><![CDATA[<p>launchmodeæ˜¯Androidä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå…³ç³»åˆ°Activityå®ä¾‹çš„åˆ›å»ºå’Œé‡ç”¨ï¼›ä½†æ˜¯ä»–æ¯”è¾ƒçç¢ï¼Œå¥½å¤šç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œåˆ†æ¸…å„ä¸ªæ¨¡å¼çš„å…·ä½“å«ä¹‰ï¼Œä¼šè®©ä½ æ›´å¥½çš„ç†è§£å¹¶æŒæ¡å®ƒã€‚Activityçš„å¯åŠ¨æ¨¡å¼æœ‰standardã€singleTopã€singleTaskã€singleInstanceå››ç§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å£°æ˜activityç»„ä»¶æ—¶è®¾ç½®lanunchmodeå€¼æŒ‡å®šå¯åŠ¨æ¨¡å¼ã€‚</p>

<!--more-->


<h4>Standedæ¨¡å¼</h4>

<p>standardæ¨¡å¼ï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰æ˜¯activityé»˜è®¤çš„å¯åŠ¨æ¨¡å¼ï¼Œæ­¤ç§æ¨¡å¼ä¸‹ï¼Œæ²¡å¯åŠ¨ä¸€æ¬¡Activityéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªActivityå®ä¾‹ï¼Œä¸€ä¸ªä»»åŠ¡æ ˆä¸­å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œä¹Ÿè®¸æ¯”è¾ƒå‚»ï¼Œå“ˆå“ˆï¼Œè¿™å°±æ˜¯é»˜è®¤çš„standardæ¨¡å¼</p>

<h4>SingleTopæ¨¡å¼</h4>

<p>æ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼Œé€šè¿‡åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒå¤§æ¦‚çš„æ„æ€ï¼Œå°±æ˜¯å½“å¯åŠ¨çš„Activityåœ¨ä»»åŠ¡æ ˆæ ˆé¡¶æ—¶ï¼Œå°±ä¸åœ¨é‡æ–°åˆ›å»ºä¸€ä¸ªActivityå®ä¾‹å•¦ï¼Œç›´æ¥å¤ç”¨å°±è¡Œäº†ï¼Œè¿™ä¸ªæ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ï¼Œä»–ä¸ä¼šå†é‡æ–°æ‰§è¡Œä»¥ä¸‹onCreateã€onStartã€onResumeç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå› ä¸ºActivityæ­¤æ—¶çš„çŠ¶æ€å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼›ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨onCreateä¸­å»åŠ è½½æ•°æ®ï¼Œé‚£ä¹ˆç°åœ¨onCreateä¸ä¼šé‡æ–°è°ƒç”¨äº†ï¼Œæˆ‘è¯¥å¦‚ä½•åŠ è½½æ–°çš„æ•°æ®å‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œç³»ç»Ÿæ—©å°±ä¸ºæˆ‘ä»¬æƒ³åˆ°è¿™ä¸€ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™ç³»ç»Ÿä¼šè°ƒç”¨Activityä¸­çš„onNewIntentæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé‡æ–°åŠ è½½å±•ç¤ºæ•°æ®ï¼›ä¸¾ä¸ªğŸŒ°ï¼šå‡å¦‚ç°åœ¨ä»»åŠ¡æ ˆä¸­æœ‰ABCä¸‰ä¸ªActivityï¼ˆAåœ¨æ ˆåº•ï¼ŒCåœ¨æ ˆé¡¶ï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œå°±è®¤ä¸ºABCéƒ½æ˜¯singleTopå¯åŠ¨æ¨¡å¼ï¼Œæ­¤æ—¶å¦‚æœå¯åŠ¨Cçš„è¯ï¼Œä»»åŠ¡æ ˆä¸­çš„Activityä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼Œå› ä¸ºCå°±åœ¨æ ˆé¡¶ï¼Œä¸éœ€è¦é‡æ–°å†åˆ›ä¸€ä¸ªCå®ä¾‹ï¼Œå¦‚æœç°åœ¨å¯åŠ¨Bï¼Œé‚£ä¹ˆæ ˆä¸­Activityä¸ºABCBï¼Œå…·ä½“ä¸ºä»€ä¹ˆæˆ‘å°±ä¸å¤šè¯´å•¦ã€‚</p>

<h4>SingleTaskæ¨¡å¼</h4>

<p>æ ˆå†…å¤ç”¨æ¨¡å¼ï¼Œè¿™é‡Œæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¦å¯åŠ¨çš„Activityåœ¨ä»»åŠ¡é‡å­˜åœ¨ï¼Œä¸ç®¡åœ¨æ ˆçš„ä»€ä¹ˆä½ç½®ï¼Œéƒ½ä¸ä¼šé‡æ–°åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œå’ŒsingleTopæ¨¡å¼ç±»ä¼¼ï¼Œå½“æ ˆä¸­å­˜åœ¨è¦å¯åŠ¨çš„Activityæ—¶ï¼Œåªä¼šè°ƒç”¨æ­¤Activityçš„onNewIntentæ–¹æ³•ï¼›æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è¦å¯åŠ¨Activity Aï¼Œå¦‚æœå½“å‰ä»»åŠ¡ä¸­å­˜åœ¨Aï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨Aä¸­onNewIntentæ–¹æ³•ï¼Œå¦‚æœä¸å­˜Aï¼Œå°±ä¼šé‡æ–°åˆ›å»ºActivity A,å¹¶å‹å…¥æ ˆä¸­ã€‚ä¸¾å‡ ä¸ªğŸŒ°ğŸŒ°ï¼š</p>

<ul>
<li>ä»»åŠ¡æ ˆS1ä¸­æœ‰ABCä¸‰ä¸ªActivityï¼Œå¦‚æœæ­¤æ—¶å·²SingleTaskæ¨¡å¼å¯åŠ¨Activity Dï¼Œå…¶æ‰€éœ€è¦çš„ä»»åŠ¡æ ˆä¸ºS2ï¼Œç”±äºS2æ ˆå’ŒActivity Déƒ½ä¸å­˜åœ¨ï¼Œæ‰€ä»¥é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡æ ˆs2,ç„¶ååˆ›å»ºä¸€ä¸ªActivity Då®ä¾‹ï¼Œæ”¾å…¥S2ä¸­ã€‚</li>
<li>å¦‚æœActivity Déœ€è¦çš„ä»»åŠ¡æ ˆä¸ºS1æƒ…å†µä¼šæ€æ ·å‘¢ï¼Ÿæ­¤æ—¶ç”±äºä»»åŠ¡æ ˆå·²ç»å­˜åœ¨ï¼Œä½†æ˜¯Activity Då¹¶ä¸åœ¨ä»»åŠ¡æ ˆä¸­ï¼Œæ‰€ä»¥ä¼šåˆ›å»ºActivity Då®ä¾‹ï¼Œå¹¶æ”¾åˆ°S1æ ˆä¸­</li>
<li>å»ºè®¾ç°åœ¨S1æ ˆä¸­æœ‰ABDCå››ä¸ªActivityï¼Œç°åœ¨è¦ä»¥SingleTaskæ¨¡å¼å¯åŠ¨Activity Dï¼Œå…¶æ‰€éœ€è¦çš„ä»»åŠ¡æ ˆä¸ºS1ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”±äºS1å’ŒActivity Déƒ½å­˜åœ¨äº†ï¼Œæ‰€ä»¥ä¸ä¼šé‡æ–°åˆ›å»ºï¼Œä½†æ˜¯è¿™æ—¶æ ˆå†…çš„æƒ…å†µä¼šå˜æˆä»€ä¹ˆæ ·å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šABDï¼Œé‚£Cå»å“ªå„¿äº†ï¼Ÿè¢«é”€æ¯äº†ï¼singleTaské»˜è®¤æœ‰clearTopæ•ˆæœï¼Œä¼šæŠŠActivity Dä¸Šçš„Activityå‡ºæ ˆã€‚</li>
</ul>


<h4>SingleInstanceæ¨¡å¼</h4>

<p>å•å®ä¾‹æ¨¡å¼ï¼Œå®ƒå’ŒsingleTaskç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œå°±æ˜¯åªèƒ½å•ç‹¬åœ¨ä¸€ä¸ªä»»åŠ¡æ ˆä¸­</p>

<h4>ä»»åŠ¡æ ˆ</h4>

<p>å‰æ–‡ä¸€æ›¾å¤šæ¬¡æåˆ°ä»»åŠ¡æ ˆï¼Œä»»åŠ¡æ ˆå°±æ˜¯ä¸€ä¸ªå…·æœ‰æ ˆç»“æ„çš„å®¹å™¨ï¼Œå¯ä»¥é˜²æ­¢å¤šä¸ªActivity;å½“å¯åŠ¨ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªtask,æ¥æ”¾ç½®æ ¹Activityï¼›é»˜è®¤æƒ…å†µä¸‹ï¼ŒActivityä¼šæ”¾åœ¨åŒä¸€ä¸ªtaskä¸­ï¼Œå¦‚æœå¯åŠ¨ä¸€ä¸ªæ–°çš„Activityçš„å°±æŠŠå®ƒå‹å…¥æ ˆé¡¶ï¼ŒæŒ‰è¿”å›é”®å°±æŠŠæ ˆé¡¶çš„Activityçš„å¼¹å‡ºtaskï¼Œä¹‹å‰çš„Activityçš„åˆè¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚æœæ­¤æ—¶taskä¸­æ²¡æœ‰Activity,å°†ä¼šå›åˆ°æ¡Œé¢ï¼›å¦å¤–åº”ç”¨ä¹‹é—´çš„taskæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚æˆ‘å¯åŠ¨åº”ç”¨Aï¼Œå›åˆ°æ¡Œé¢æœ‰å¯åŠ¨åº”ç”¨Bï¼Œæˆ‘è¿˜å¯ä»¥å›åˆ°æ¡Œé¢å†æ¬¡å¯åŠ¨Aï¼Œä½†æ˜¯å†…å®¹å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹‹å‰åº”ç”¨Aä¸­çš„taskè¿˜ä¾ç„¶ä¿ç•™ç€ã€‚</p>

<h4>affinity</h4>

<p>æœ‰æ—¶ï¼ŒAndroidéœ€è¦çŸ¥é“ä¸€ä¸ªActivityä»–æ‰€å±çš„taskï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªå±æ€§æ¥ç¡®å®šçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œaffinityçš„å€¼ä¸ºåº”ç”¨çš„åŒ…åï¼Œæˆ‘ä¹Ÿå¯ä»¥é€šè¿‡taskaffinityè¿›è¡Œè®¾ç½®ï¼Œå…¶æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>

<ul>
<li>æ ¹æ®affinityé‡æ–°ä¸ºActivityé€‰æ‹©å®¿ä¸»task</li>
<li>å¯åŠ¨singleTaskçš„Activityï¼Œä¼šæ ¹æ®affinityæŸ¥æ‰¾æˆ–è€…é‡æ–°åˆ›å»ºä¸€ä¸ªtask</li>
</ul>


<h4>å¸¸è§çš„flags</h4>

<ul>
<li>FLAG_ACTIVITY_NEW_TASK:å½“å¯åŠ¨activityçš„intentä¸­è®¾ç½®äº†æ­¤flagæ—¶ï¼Œç³»ç»Ÿä¼šå¯»æ‰¾æˆ–è€…é‡æ–°åˆ›å»ºä¸€ä¸ªtaskæ¥å­˜æ”¾activityï¼Œå¯»æ‰¾çš„ä¾æ®å°±æ˜¯activityçš„affinityï¼Œå¦‚è¿‡æ‰¾åˆ°äº†ä¸€ä¸ªtaskï¼Œåˆ™å°†æ­¤Activityæ”¾åˆ°è¿™ä¸ªtaskï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œå°±åˆ›å»ºä¸€ä¸ªtaskï¼Œå¹¶æŠŠactivityå‹å…¥æ ˆä¸­ï¼Œ<strong><em>æ³¨æ„ï¼š</em></strong>å¦‚æœåŒä¸€ä¸ªåº”ç”¨ä¸­çš„activityçš„taskaffinityä½¿ç”¨çš„é»˜è®¤å€¼æˆ–è€…è®¾ç½®çš„åŒä¸€ä¸ªå€¼ï¼Œåœ¨åº”ç”¨å†…ä½¿ç”¨è¿™ä¸ªæ ‡è®°æ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ï¼Œå› ä¸ºå½“å‰çš„taskå°±æ˜¯è¦æ‰¾çš„task</li>
<li>FLAG_ACTIVITY_CLEAR_TOPï¼šå½“å¯åŠ¨çš„Activityçš„intentä¸­è®¾ç½®äº†è¿™ä¸ªæ ‡è®°ï¼Œå¦‚æœæ ˆä¸­å­˜åœ¨è¦å¯åŠ¨çš„Activityï¼Œåˆ™ä¼šæŠŠæ­¤Activityä¹‹ä¸Šçš„Activityå‡ºæ ˆï¼›ä¾‹å¦‚åœ¨MainActivityå¯åŠ¨SecondActivityï¼Œåœ¨SecondActivityå¯åŠ¨ThirdActivityï¼Œæ­¤æ—¶åœ¨ThirdActivityä¸­å¯åŠ¨MainActivityå¹¶åœ¨å¯åŠ¨çš„intentä¸­å¢åŠ FLAG_ACTIVITY_CLEAR_TOPæ ‡è®°ï¼Œæ­¤æ—¶ï¼ŒSecondActivityï¼ŒThirdActivityå°†ä¼šå‡ºæ ˆï¼ŒMainActivityé‡æ–°å‡ºç°</li>
<li>FLAG_ACTIVITY_SINGLE_TOP:å½“è¦å¯åŠ¨çš„Activityåœ¨taskæ ˆé¡¶æ—¶ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºActivityï¼Œè€Œæ˜¯é‡ç”¨æ­¤Activity</li>
</ul>


<p>è¿™é‡Œæ¨èå‡ ç¯‡å†™çš„æ¯”è¾ƒå¥½çš„åšå®¢ï¼š</p>

<p><a href="http://blog.csdn.net/liuhe688/article/details/6761337">Activityçš„taskç›¸å…³</a></p>

<p><a href="http://blog.csdn.net/guolin_blog/article/details/41087993">Androidä»»åŠ¡å’Œè¿”å›æ ˆå®Œå…¨è§£æï¼Œç»†æ•°é‚£äº›ä½ æ‰€ä¸çŸ¥é“çš„ç»†èŠ‚ </a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Activityç”Ÿå‘½å‘¨æœŸï¼ˆä¸‰ï¼‰]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/02/activitysheng-ming-zhou-qi-(san-)/"/>
    <updated>2016-08-02T10:19:00+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/02/activitysheng-ming-zhou-qi-(san-)</id>
    <content type="html"><![CDATA[<p>ä¸Šç¯‡å†™åˆ°é»˜è®¤æƒ…å†µä¸‹ç³»ç»Ÿä¼šè‡ªåŠ¨å­˜å‚¨Activityçš„çŠ¶æ€ï¼Œä¹Ÿè®¸ä½ çœ‹åˆ°ä¼šé©¬ä¸Šå®è·µä¸€ä¸‹ï¼Œä½†æ˜¯å¯èƒ½å¹¶æ²¡æœ‰å¾—åˆ°é¢„æœŸçš„æ•ˆæœã€‚</p>

<!--more-->


<h4>è‡ªåŠ¨å­˜å‚¨æ¢å¤çŠ¶æ€-æ­£ç¡®çš„å§¿åŠ¿</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>  <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>    <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;EditText</span>
</span><span class='line'>      <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>        <span class="na">android:id=</span><span class="s">&quot;@+id/main_edit&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/RelativeLayout&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>OK,è¿™æ ·ç³»ç»Ÿå°±å¯ä»¥ä¿å­˜EditTextçš„çŠ¶æ€å•¦</p>

<p><strong><em>æ³¨æ„ï¼š</em></strong>
å¿…é¡»è®¾ç½®idï¼Œç³»ç»Ÿæ‰ä¼šå¸®æˆ‘ä»¬ä¿å­˜æ§ä»¶çš„çŠ¶æ€ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ</p>

<h4>ç³»ç»Ÿä¿å­˜Activityçš„è¿‡ç¨‹</h4>

<p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹Activityä¸­çš„onSaveInstanceStatæ–¹æ³•ï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onSaveInstanceState</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">outState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">outState</span><span class="o">.</span><span class="na">putBundle</span><span class="o">(</span><span class="n">WINDOW_HIERARCHY_TAG</span><span class="o">,</span> <span class="n">mWindow</span><span class="o">.</span><span class="na">saveHierarchyState</span><span class="o">());</span>
</span><span class='line'>    <span class="n">Parcelable</span> <span class="n">p</span> <span class="o">=</span> <span class="n">mFragments</span><span class="o">.</span><span class="na">saveAllState</span><span class="o">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">p</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">outState</span><span class="o">.</span><span class="na">putParcelable</span><span class="o">(</span><span class="n">FRAGMENTS_TAG</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="n">getApplication</span><span class="o">().</span><span class="na">dispatchActivitySaveInstanceState</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">outState</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å…¶ä¸­æ–¹æ³•ä¸­çš„ç¬¬ä¸€å¥ï¼Œè°ƒç”¨äº†Windowä¸­çš„saveHierarchyStateæ–¹æ³•ï¼Œæˆ‘ä»¬çŸ¥é“Windowæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹ä¸‹Windowçš„å­ç±»PhoneWindowä¸­çš„saveHierarchyStateçš„æ–¹æ³•ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="n">Bundle</span> <span class="nf">saveHierarchyState</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="o">...</span><span class="na">æ­¤å¤„çœç•¥å‡ å¥ä»£ç </span>
</span><span class='line'>  <span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Parcelable</span><span class="o">&gt;</span> <span class="n">states</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Parcelable</span><span class="o">&gt;();</span>
</span><span class='line'>    <span class="n">mContentParent</span><span class="o">.</span><span class="na">saveHierarchyState</span><span class="o">(</span><span class="n">states</span><span class="o">);</span>
</span><span class='line'>    <span class="n">outState</span><span class="o">.</span><span class="na">putSparseParcelableArray</span><span class="o">(</span><span class="n">VIEWS_TAG</span><span class="o">,</span> <span class="n">states</span><span class="o">);</span>
</span><span class='line'>    <span class="o">...</span><span class="na">æ­¤å¤„çœç•¥å‡ å¥ä»£ç </span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬çœ‹é‡ç‚¹ï¼Œå…¶å®ƒä»£ç å°±ä¸è´´äº†ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè°ƒç”¨mContentParentçš„saveHierarchyState,mContentViewæ˜¯ä¸€ä¸ªViewGroupï¼ŒViewGroupä¸­æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘çœ‹ä¸‹çˆ¶ç±»View</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveHierarchyState</span><span class="o">(</span><span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Parcelable</span><span class="o">&gt;</span> <span class="n">container</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">dispatchSaveInstanceState</span><span class="o">(</span><span class="n">container</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç›´æ¥è°ƒç”¨äº†dispatchSaveInstanceStateæ–¹æ³•ï¼Œæ³¨æ„è¿™æ—¶æˆ‘ä»¬åº”è¯¥çœ‹ViewGroupä¸­dispatchSaveInstanceStateæ–¹æ³•</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">dispatchSaveInstanceState</span><span class="o">(</span><span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Parcelable</span><span class="o">&gt;</span> <span class="n">container</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">dispatchSaveInstanceState</span><span class="o">(</span><span class="n">container</span><span class="o">);</span>
</span><span class='line'>    <span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">mChildrenCount</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">final</span> <span class="n">View</span><span class="o">[]</span> <span class="n">children</span> <span class="o">=</span> <span class="n">mChildren</span><span class="o">;</span>
</span><span class='line'>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">View</span> <span class="n">c</span> <span class="o">=</span> <span class="n">children</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">((</span><span class="n">c</span><span class="o">.</span><span class="na">mViewFlags</span> <span class="o">&amp;</span> <span class="n">PARENT_SAVE_DISABLED_MASK</span><span class="o">)</span> <span class="o">!=</span> <span class="n">PARENT_SAVE_DISABLED</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">c</span><span class="o">.</span><span class="na">dispatchSaveInstanceState</span><span class="o">(</span><span class="n">container</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å¤§è‡´åšäº†ä¸¤ä»¶äº‹æƒ…ï¼Œç¬¬ä¸€ä¸ªè°ƒç”¨æœ¬èº«çš„dispatchSaveInstanceStateï¼Œéå†å­Viewå¹¶è°ƒç”¨å­Viewçš„dispatchSaveInstanceStateæ–¹æ³•ï¼›</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">dispatchSaveInstanceState</span><span class="o">(</span><span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Parcelable</span><span class="o">&gt;</span> <span class="n">container</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">mID</span> <span class="o">!=</span> <span class="n">NO_ID</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">mViewFlags</span> <span class="o">&amp;</span> <span class="n">SAVE_DISABLED_MASK</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mPrivateFlags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">PFLAG_SAVE_STATE_CALLED</span><span class="o">;</span>
</span><span class='line'>        <span class="n">Parcelable</span> <span class="n">state</span> <span class="o">=</span> <span class="n">onSaveInstanceState</span><span class="o">();</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">((</span><span class="n">mPrivateFlags</span> <span class="o">&amp;</span> <span class="n">PFLAG_SAVE_STATE_CALLED</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span>
</span><span class='line'>                    <span class="s">&quot;Derived class did not call super.onSaveInstanceState()&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="c1">// Log.i(&quot;View&quot;, &quot;Freezing #&quot; + Integer.toHexString(mID)</span>
</span><span class='line'>            <span class="c1">// + &quot;: &quot; + state);</span>
</span><span class='line'>            <span class="n">container</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">mID</span><span class="o">,</span> <span class="n">state</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>OKï¼Œé‡ç‚¹æ¥äº†ï¼Œæˆ‘ä»¬å‘ç°å½“idä¸ºç©ºæ—¶ï¼Œä¸ä¼šä¿å­˜Viewçš„çŠ¶æ€ï¼›æ•´ä¸ªä¿å­˜çŠ¶æ€åˆ†æå°±ç®—å®Œäº†ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Activityç”Ÿå‘½å‘¨æœŸï¼ˆäºŒï¼‰]]></title>
    <link href="http://bgallon.github.io/blog/2016/08/01/activitysheng-ming-zhou-qi-(er-)/"/>
    <updated>2016-08-01T22:10:35+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/08/01/activitysheng-ming-zhou-qi-(er-)</id>
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸‹ï¼Œå¼‚å¸¸æƒ…å†µActivityçš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™é‡Œè¯´æ˜è¿™é‡Œçš„å¼‚å¸¸æƒ…å†µä¸æ˜¯æˆ‘ä»¬ç¨‹åºå´©æºƒï¼Œè€Œæ˜¯æŒ‡å½“ç³»ç»Ÿé…ç½®å‘ç”Ÿå˜åŒ–æˆ–è€…å†…å­˜ä¸è¶³æ—¶çš„æƒ…å†µã€‚</p>

<!--more-->


<h4>ä¸€ã€ç³»ç»Ÿå†…å­˜ä¸è¶³</h4>

<p>å…ˆä»‹ç»ä¸€ä¸‹Activityçš„ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹:</p>

<ul>
<li>å‰å°Activityï¼Œå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œä¼˜å…ˆçº§æœ€é«˜</li>
<li>å¯è§ä½†ä¸èƒ½è¿›è¡Œäº¤äº’çš„Activityï¼Œä¾‹å¦‚å¼¹æ¡†ä¸­çš„Activity</li>
<li>åå°Activityï¼Œä¸å¯è§ï¼Œä¼˜å…ˆçº§æœ€ä½</li>
</ul>


<p>å½“ç³»ç»Ÿçš„å†…å­˜æ¯”è¾ƒç´§å¼ æ—¶ï¼Œä¼šæŒ‰ç…§è¿™ä¸ªä¼˜å…ˆçº§æ¥å›æ”¶é”€æ¯Activityï¼Œåœ¨é”€æ¯Activityæ—¶ï¼Œä¼šè°ƒç”¨onSaveInstanceæ–¹æ³•ï¼Œä¿å­˜å½“å‰Activityçš„çŠ¶æ€</p>

<h4>äºŒã€ç³»ç»Ÿé…ç½®å‘ç”Ÿå˜åŒ–</h4>

<p>å½“åº”ç”¨å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®ç³»ç»Ÿçš„é…ç½®åŠ è½½èµ„æºï¼Œå½“ç³»ç»Ÿé…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒActivityä¼šè¢«é”€æ¯å¹¶é‡æ–°åˆ›å»ºï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é˜»æ­¢å…¶é”€æ¯ã€‚å½“ç³»ç»Ÿé…ç½®å‘ç”Ÿå˜åŒ–åï¼ŒActivityä¼šæ‰§è¡Œæ–¹æ³•onPauseã€onStopã€onDestoryæ–¹æ³•ï¼›</p>

<h4>ä¸‰ã€é˜»æ­¢ç³»ç»Ÿé…ç½®å˜åŒ–å¼•èµ·çš„é”€æ¯é‡å»º</h4>

<p>ç³»ç»Ÿçš„é…ç½®æœ‰å¾ˆå¤šå†…å®¹ï¼Œå½“ç³»ç»ŸæŸé¡¹é…ç½®å‘ç”Ÿå˜åŒ–æ—¶æˆ‘ä»¬ä¸æƒ³Activityè¢«é”€æ¯é‡å»ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­è®¾ç½®Activityçš„configChangeså±æ€§ï¼Œè¿™æ ·å½“æ­¤é¡¹é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¸ä¼šé”€æ¯é‡å¯äº†ï¼Œè€Œæ˜¯è°ƒç”¨Activityçš„onConfigurationChangedæ–¹æ³•ï¼Œä¸¾ä¸ªğŸŒ°ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&quot;.DemoActivity&quot;</span> <span class="na">android:configChanges=</span><span class="s">&quot;orientation|screenSize|</span>
</span><span class='line'><span class="s">keyboardHidden&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>åªè¦ä½ ä¸æƒ³æŸé¡¹é…ç½®çš„å˜åŒ–å¯¼è‡´Activityçš„é”€æ¯é‡å¯ï¼Œä½ å°±å¯ä»¥é…ç½®è¿›å»ï¼Œå¤šä¸ªå¯ä»¥ä½¿ç”¨"|&ldquo;æ¥å¢åŠ </p>

<h4>ä¸‰ã€æ•°æ®çš„ä¿å­˜å’Œæ¢å¤</h4>

<p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨Activityå¼‚å¸¸é”€æ¯å‰å­˜å‚¨ä¸€äº›æ•°æ®æ€ä¹ˆæå‘¢ï¼›åˆ«æ‹…å¿ƒï¼Œåœ¨å¼‚å¸¸é”€æ¯æ—¶ï¼Œä¼šè°ƒç”¨Activityçš„onSaveInstanceStateæ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ä¿å­˜å½“å‰Activityçš„çŠ¶æ€ç­‰ï¼Œå½“åœ¨å¯åŠ¨è°ƒç”¨onCreateæ–¹æ³•æ—¶ï¼Œæ³¨æ„onCreateæ–¹æ³•æœ‰ä¸ªBundleå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¸¦æœ‰åœ¨onSaveInstanceStateæ–¹æ³•ä¸­ä¿å­˜çš„æ•°æ®ï¼ˆå…·ä½“æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡å°±ä¸çŸ¥é“äº†ï¼ŒO(âˆ©_âˆ©)Oå“ˆå“ˆ~ï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬å°±å¯ä»¥æ¢å¤æ•°æ®äº†ï¼Œé™¤æ­¤ä¹‹å¤–ç³»ç»Ÿè¿˜ä¼šè°ƒç”¨onRestoreInstanceStateæ–¹æ³•</p>

<p><strong><em>æ³¨æ„ï¼š</em></strong>
å½“ä¸æ˜¯å¼‚å¸¸é”€æ¯é‡å¯æ—¶ï¼Œå¹¶ä¸ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼›åœ¨onCreateä¸­ä½¿ç”¨å‚æ•°æ¢å¤æ•°æ®æ—¶ï¼Œæ³¨æ„åˆ¤æ–­å‚æ•°éç©ºçš„æƒ…å†µï¼Œä¸æ˜¯å¼‚å¸¸é‡å¯çš„æƒ…å†µï¼Œå‚æ•°æ˜¯ä¸ºç©ºçš„ã€‚</p>

<p><strong><em>è°ƒç”¨æ—¶æœºï¼š</em></strong>
onSaveInstanceStateæ˜¯åœ¨onStopä¹‹å‰ï¼Œå…·ä½“æ˜¯åœ¨onPauseä¹‹å‰è¿˜æ˜¯åœ¨onPauseä¹‹åï¼Œè¿™ä¸ªä¸ç¡®å®šï¼›
onRestoreInstanceStateæ–¹æ³•æ˜¯åœ¨onStartæ–¹æ³•ä¹‹åï¼›</p>

<p><strong><em>ç³»ç»Ÿæ¢å¤æ•°æ®ï¼š</em></strong>
ç³»ç»Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šå¸®æˆ‘ä»¬ä¿å­˜Activityçš„çŠ¶æ€ï¼Œé‡å¯æ—¶æ¢å¤æ•°æ®ï¼›åœ¨Viewä¸­æœ‰å’Œactivityä¸€æ ·çš„æ–¹æ³•onSaveInstanceStateå’ŒonRestoreInstanceSateï¼Œå…·ä½“ä¿å­˜é‚£äº›æ•°æ®å¯ä»¥çœ‹ä¸‹å…¶ä¸­çš„æºç </p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Activityç”Ÿå‘½å‘¨æœŸï¼ˆä¸€ï¼‰]]></title>
    <link href="http://bgallon.github.io/blog/2016/07/31/activitysheng-ming-zhou-qi/"/>
    <updated>2016-07-31T22:45:43+08:00</updated>
    <id>http://bgallon.github.io/blog/2016/07/31/activitysheng-ming-zhou-qi</id>
    <content type="html"><![CDATA[<p>ç»è¿‡ä¸¤å¤©çš„åŠªåŠ›ï¼Œæ­å»ºäº†Octopress,è™½ç„¶æœ‰ç‚¹è€ï¼Œä½†æ˜¯æ„Ÿè§‰è¿˜ä¸é”™ï¼Œæ¯”èµ·csdnè¿™ä¸ªè¶…çº§æ–¹ä¾¿ï¼Œèµ·ç æ²¡æœ‰è®¨åŒçš„å¹¿å‘Šï¼Œåœ¨æˆ‘çœ¼å‰æ™ƒæ¥æ™ƒå»ï¼Œå†™èµ·æ–‡ç« æ¥ï¼Œæœ‰ç§æå®¢èŒƒï¼›ä»¥å‰å¾ˆå°‘å†™æ–‡ç« ï¼Œä½†æ˜¯å¾ˆå¤šä¸œè¥¿æ€»æ˜¯ä¼šæ…¢æ…¢å¿˜è®°ï¼Œå°±å†æ­¤åšä¸ªè®°å½•å§ã€‚å¼€å§‹ä»Šå¤©çš„è¯é¢˜ï¼ŒActivityä½œä¸ºAndroidå››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œæ˜¯ä½¿ç”¨æœ€ä¸ºé¢‘ç¹çš„ä¸€ç§ç»„ä»¶ã€‚ä¸‹é¢ä¸»é¡µè§£æä¸€ä¸‹Activityç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€äº›é—®é¢˜</p>

<!--more-->


<h4>ä¸€ã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h4>

<p><img src="http://pic001.cnblogs.com/img/tea9/201008/2010080516521645.png" alt="Activityç”Ÿå‘½å‘¨æœŸå›¾" /><br>
<strong><em>onCreateï¼š</em></strong>Activityç”Ÿå‘½å‘¨æœŸä¸­ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œæ¯”å¦‚åŠ è½½å¸ƒå±€å’Œæ•°æ®ç­‰<br>
<strong><em>onStartï¼š</em></strong>Activityå·²ç»å¯è§äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å‡ºç°åœ¨å‰å°ï¼Œæ— æ³•è¿›è¡Œäº¤äº’<br>
<strong><em>onResume:</em></strong>Activityå‡ºç°åœ¨å‰å°ï¼Œç”¨æˆ·å¯ä»¥ä¸å…¶è¿›è¡Œäº¤äº’<br>
<strong><em>onPause:</em></strong>Activityæ­£åœ¨åœæ­¢,åœ¨è¿™ä¸ªæ–¹æ³•é‡Œä¸»é¡µä¸èƒ½è¿›è¡Œè€—æ—¶çš„å¤„ç†ï¼Œå¦åˆ™å¯èƒ½ä¼šå½±å“æ–°Activityçš„å¯åŠ¨<br>
<strong><em>onStop:</em></strong>Activityå³å°†åœæ­¢<br>
<strong><em>onRestart:</em></strong>è¡¨ç¤ºActivityæ­£åœ¨é‡æ–°å¯åŠ¨ï¼Œå½“å½“å‰Activityä»ä¸å¯è§é‡æ–°å˜ä¸ºå¯è§æ—¶è°ƒç”¨ã€‚ä¸€èˆ¬å¯åŠ¨æ–°çš„Activityåˆå›æ¥ï¼Œä¼šè°ƒåŠ¨ï¼Œæˆ–è€…æŒ‰homeé”®åˆ°æ¡Œé¢ï¼Œåˆå›åˆ°æ­¤Activityæ—¶è°ƒç”¨ã€‚<br>
<strong><em>onDestroy:</em></strong>Activityæ­£åœ¨é”€æ¯ï¼Œä¸€èˆ¬ç‚¹å‡»è¿”å›é”®æ—¶è§¦å‘<br></p>

<h4>äºŒã€Activityå¸¸è§æƒ…å½¢</h4>

<ul>
<li>ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼ŒonCreate->onStart->onResume</li>
<li>å½“å¯åŠ¨æ–°Activityæˆ–è€…ç‚¹å‡»Homeå›åˆ°æ¡Œé¢æ—¶ï¼Œä¼šç»§ç»­è°ƒç”¨onPause->onStop,ä½†æ˜¯å½“å¯åŠ¨æ–°çš„Activityæ˜¯é€æ˜ä¸»é¢˜æ—¶ï¼Œä¸ä¼šè°ƒç”¨onStopæ–¹æ³•</li>
<li>å½“ç”¨æˆ·å›åˆ°Activityæ—¶ï¼Œä¼šç»§ç»­è°ƒç”¨onRestart->onStart->onResume</li>
<li>å½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®æ—¶ï¼ŒonPause->onStop->onDestory</li>
</ul>


<h4>ä¸‰ã€ç‰¹åˆ«è¯´æ˜</h4>

<ul>
<li>onPauseå’ŒonResume,onStopå’ŒonStartæ˜¯é…å¯¹çš„ï¼Œçœ‹èµ·æ¥onPauseå’ŒonStopï¼ŒonStartå’ŒonResumeæ–¹æ³•çš„å«ä¹‰æ˜¯å·®ä¸å¤šçš„ï¼Œå…¶å®è¿™å‡ ä¸ªæ–¹æ³•çš„æè¿°é‡ç‚¹ä¸ç”¨ï¼ŒonPauseå’ŒonResumeæ˜¯æè¿°æ˜¯å¦å¯ä»¥è¿›è¡Œäº¤äº’ï¼›è€ŒonStartå’ŒonStopæ¥æè¿°æ˜¯å¦å¯è§ã€‚</li>
<li>å¯åŠ¨æ–°çš„Activityæ—¶ï¼ŒonPauseå…ˆè¿›è¡Œè°ƒç”¨ï¼Œæ‰ä¼šè°ƒç”¨æ–°çš„Activityçš„ç”Ÿå‘½å‘¨æœŸ</li>
</ul>

]]></content>
  </entry>
  
</feed>
